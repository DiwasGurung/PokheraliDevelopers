{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\Test\\\\PokheraliDevelopers\\\\pokherali-developers\\\\src\\\\pages\\\\BookDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { Star, ShoppingCart, Bookmark, Heart, Share2, ChevronLeft, Award, Clock, ThumbsUp, ChevronDown } from \"lucide-react\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport { CartContext } from \"../contexts/CartContext\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function EnhancedBookDetails() {\n  _s();\n  var _book$averageRating;\n  const {\n    bookId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    addItem\n  } = useContext(CartContext);\n  const [book, setBook] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isBookmarked, setIsBookmarked] = useState(false);\n  const [userReview, setUserReview] = useState(null);\n  const [reviewText, setReviewText] = useState(\"\");\n  const [reviewRating, setReviewRating] = useState(0);\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [reviewFormLoading, setReviewFormLoading] = useState(false);\n  const [reviewFormError, setReviewFormError] = useState(\"\");\n  const [expandedReviews, setExpandedReviews] = useState(false);\n  const [addedToCart, setAddedToCart] = useState(false);\n\n  // Fetch book details\n  useEffect(() => {\n    const fetchBookDetails = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`https://localhost:7126/api/Books/${bookId}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch book details');\n        }\n        const bookData = await response.json();\n        setBook(bookData);\n\n        // If user is logged in, check if book is bookmarked\n        if (user) {\n          checkBookmarkStatus();\n          checkUserReview();\n        }\n      } catch (err) {\n        console.error('Error fetching book details:', err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchBookDetails();\n  }, [bookId, user]);\n\n  // Check if book is bookmarked by the user\n  const checkBookmarkStatus = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      const response = await fetch('https://localhost:7126/api/Bookmarks', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch bookmarks');\n      }\n      const bookmarks = await response.json();\n      const isMarked = bookmarks.some(bookmark => bookmark.id === parseInt(bookId));\n      setIsBookmarked(isMarked);\n    } catch (err) {\n      console.error('Error checking bookmark status:', err);\n    }\n  };\n\n  // Check if user has reviewed this book\n  const checkUserReview = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      const response = await fetch('https://localhost:7126/api/Reviews/user', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch user reviews');\n      }\n      const reviews = await response.json();\n      const review = reviews.find(r => r.bookId === parseInt(bookId));\n      if (review) {\n        setUserReview(review);\n        setReviewText(review.comment);\n        setReviewRating(review.rating);\n      }\n    } catch (err) {\n      console.error('Error checking user review:', err);\n    }\n  };\n\n  // Toggle bookmark status\n  const toggleBookmark = async () => {\n    if (!user) {\n      navigate('/login', {\n        state: {\n          redirectTo: `/book/${bookId}`\n        }\n      });\n      return;\n    }\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n      if (isBookmarked) {\n        // Remove bookmark\n        const response = await fetch(`https://localhost:7126/api/Bookmarks/${bookId}`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error('Failed to remove bookmark');\n        }\n        setIsBookmarked(false);\n      } else {\n        // Add bookmark\n        const response = await fetch('https://localhost:7126/api/Bookmarks', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(parseInt(bookId))\n        });\n        if (!response.ok) {\n          throw new Error('Failed to add bookmark');\n        }\n        setIsBookmarked(true);\n      }\n    } catch (err) {\n      console.error('Error toggling bookmark:', err);\n      // Display error message to user\n    }\n  };\n\n  // Add book to cart\n  const handleAddToCart = () => {\n    if (!book) return;\n    addItem({\n      id: book.id,\n      title: book.title,\n      author: book.author,\n      price: book.price,\n      imageUrl: book.imageUrl\n    });\n\n    // Show success indicator\n    setAddedToCart(true);\n    setTimeout(() => {\n      setAddedToCart(false);\n    }, 2000);\n  };\n\n  // Submit review\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!user) {\n      navigate('/login', {\n        state: {\n          redirectTo: `/book/${bookId}`\n        }\n      });\n      return;\n    }\n    if (reviewRating === 0) {\n      setReviewFormError(\"Please select a rating\");\n      return;\n    }\n    try {\n      setReviewFormLoading(true);\n      setReviewFormError(\"\");\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n      const reviewData = {\n        bookId: parseInt(bookId),\n        rating: reviewRating,\n        comment: reviewText\n      };\n      let response;\n      if (userReview) {\n        // Update existing review\n        reviewData.id = userReview.id;\n        response = await fetch(`https://localhost:7126/api/Reviews/${userReview.id}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(reviewData)\n        });\n      } else {\n        // Create new review\n        response = await fetch('https://localhost:7126/api/Reviews', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(reviewData)\n        });\n      }\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to submit review');\n      }\n\n      // Refresh book details to show updated review\n      const updatedBookResponse = await fetch(`https://localhost:7126/api/Books/${bookId}`);\n      if (updatedBookResponse.ok) {\n        const updatedBook = await updatedBookResponse.json();\n        setBook(updatedBook);\n      }\n\n      // If this was a new review, update userReview state\n      if (!userReview) {\n        setUserReview({\n          id: parseInt(bookId),\n          // This will be replaced with actual ID from response\n          bookId: parseInt(bookId),\n          rating: reviewRating,\n          comment: reviewText,\n          createdAt: new Date().toISOString()\n        });\n      }\n      setShowReviewForm(false);\n    } catch (err) {\n      console.error('Error submitting review:', err);\n      setReviewFormError(err.message);\n    } finally {\n      setReviewFormLoading(false);\n    }\n  };\n\n  // Delete review\n  const handleDeleteReview = async () => {\n    if (!userReview) return;\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n      const response = await fetch(`https://localhost:7126/api/Reviews/${userReview.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to delete review');\n      }\n\n      // Reset review states\n      setUserReview(null);\n      setReviewText(\"\");\n      setReviewRating(0);\n      setShowReviewForm(false);\n\n      // Refresh book details to show updated reviews\n      const updatedBookResponse = await fetch(`https://localhost:7126/api/Books/${bookId}`);\n      if (updatedBookResponse.ok) {\n        const updatedBook = await updatedBookResponse.json();\n        setBook(updatedBook);\n      }\n    } catch (err) {\n      console.error('Error deleting review:', err);\n      // Display error message to user\n    }\n  };\n\n  // Render stars for rating\n  const renderStars = (rating, interactive = false) => {\n    return Array(5).fill(0).map((_, i) => /*#__PURE__*/_jsxDEV(Star, {\n      size: interactive ? 24 : 18,\n      onClick: interactive ? () => setReviewRating(i + 1) : undefined,\n      className: `${interactive ? 'cursor-pointer' : ''} ${i < Math.floor(rating) ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'} ${interactive && i < reviewRating ? 'text-yellow-400 fill-yellow-400' : ''}`\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 9\n    }, this));\n  };\n\n  // Calculate half stars for more accurate ratings\n  const hasHalfStar = rating => rating % 1 >= 0.5;\n\n  // Calculate discounted price if book is on sale\n  const getDisplayPrice = () => {\n    if (!book) return null;\n    if (book.isOnSale && book.discountPercentage && book.discountStartDate && book.discountEndDate) {\n      const now = new Date();\n      const startDate = new Date(book.discountStartDate);\n      const endDate = new Date(book.discountEndDate);\n      if (now >= startDate && now <= endDate) {\n        const discountedPrice = book.price * (1 - book.discountPercentage / 100);\n        return {\n          current: discountedPrice.toFixed(2),\n          original: book.price.toFixed(2),\n          discount: book.discountPercentage\n        };\n      }\n    }\n    return {\n      current: book.price.toFixed(2),\n      original: null,\n      discount: null\n    };\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center h-64\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-50 text-red-600 p-4 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/browse'),\n          className: \"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors\",\n          children: \"Return to Browse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this);\n  }\n  if (!book) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-50 text-yellow-600 p-4 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Book not found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/browse'),\n          className: \"mt-4 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors\",\n          children: \"Return to Browse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this);\n  }\n  const price = getDisplayPrice();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto bg-white rounded-xl shadow-md overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-6 pt-6 pb-2\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/browse'),\n        className: \"inline-flex items-center text-sm text-purple-600 hover:text-purple-800 transition-colors\",\n        children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n          size: 16,\n          className: \"mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), \"Back to Books\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col lg:flex-row gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:w-1/3 relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aspect-[3/4] rounded-xl overflow-hidden bg-gray-100 shadow-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: book.imageUrl || \"/placeholder.svg?height=600&width=400&query=book cover\",\n              alt: `${book.title} book cover`,\n              className: \"w-full h-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-4 left-4 flex flex-col gap-2\",\n            children: [book.isBestseller && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"bg-yellow-500 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Award, {\n                size: 14,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 19\n              }, this), \"Bestseller\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 17\n            }, this), book.isNewRelease && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"bg-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                size: 14,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 19\n              }, this), \"New Release\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this), book.isOnSale && price.discount && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-1\",\n                children: [price.discount, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this), \"On Sale\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"absolute top-4 right-4 bg-white/80 backdrop-blur-sm p-2 rounded-full shadow-md hover:bg-white transition-colors\",\n            onClick: () => navigator.share({\n              title: book.title,\n              text: `Check out ${book.title} by ${book.author}`,\n              url: window.location.href\n            }).catch(err => console.error('Error sharing:', err)),\n            children: /*#__PURE__*/_jsxDEV(Share2, {\n              size: 18,\n              className: \"text-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:w-2/3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col h-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-grow\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap items-start justify-between gap-4 mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    className: \"text-3xl font-bold text-gray-900 mb-2\",\n                    children: book.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xl text-gray-600\",\n                    children: [\"by \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"hover:text-purple-600 cursor-pointer transition-colors\",\n                      children: book.author\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 467,\n                      columnNumber: 26\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 466,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-2xl font-bold text-purple-600\",\n                    children: [\"$\", price.current]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 21\n                  }, this), price.original && price.original !== price.current && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-lg text-gray-500 line-through\",\n                    children: [\"$\", price.original]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-sm px-3 py-1 rounded-full font-medium ${book.stock > 0 ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"}`,\n                    children: book.stock > 0 ? \"In stock\" : \"Out of stock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex\",\n                  children: [renderStars(book.averageRating || 0), hasHalfStar(book.averageRating || 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"relative\",\n                    children: [/*#__PURE__*/_jsxDEV(Star, {\n                      size: 18,\n                      className: \"text-gray-300\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 493,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"absolute inset-0 overflow-hidden w-1/2\",\n                      children: /*#__PURE__*/_jsxDEV(Star, {\n                        size: 18,\n                        className: \"text-yellow-400 fill-yellow-400\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 495,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 494,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 492,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 text-gray-600\",\n                  children: [\"(\", ((_book$averageRating = book.averageRating) === null || _book$averageRating === void 0 ? void 0 : _book$averageRating.toFixed(1)) || 0, \" out of 5)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mx-2 text-gray-400\",\n                  children: \"\\u2022\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"#reviews\",\n                  className: \"text-purple-600 hover:text-purple-800 transition-colors\",\n                  children: [book.reviewCount || 0, \" reviews\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-8\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold mb-3 text-gray-900\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-700 leading-relaxed\",\n                  children: book.description || \"No description available for this book.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-3 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `flex items-center gap-2 ${addedToCart ? \"bg-green-600 text-white\" : \"bg-purple-600 text-white hover:bg-purple-700\"} px-6 py-3 rounded-lg transition-colors shadow-sm font-medium`,\n                onClick: handleAddToCart,\n                disabled: book.stock <= 0 || addedToCart,\n                children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: book.stock <= 0 ? \"Out of Stock\" : addedToCart ? \"Added to Cart!\" : \"Add to Cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `flex items-center gap-2 ${isBookmarked ? \"bg-purple-100 text-purple-800 hover:bg-purple-200\" : \"bg-gray-100 text-gray-800 hover:bg-gray-200\"} px-6 py-3 rounded-lg transition-colors font-medium`,\n                onClick: toggleBookmark,\n                children: [/*#__PURE__*/_jsxDEV(Bookmark, {\n                  size: 18,\n                  className: isBookmarked ? \"fill-purple-800\" : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 543,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: isBookmarked ? \"Bookmarked\" : \"Bookmark\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"flex items-center gap-2 bg-red-50 text-red-600 px-6 py-3 rounded-lg hover:bg-red-100 transition-colors font-medium\",\n                children: [/*#__PURE__*/_jsxDEV(Heart, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Add to Wishlist\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 548,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t border-gray-100 bg-gray-50 p-8 rounded-b-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-6 text-gray-900\",\n        children: \"Book Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"Genre:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.genre || \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"Format:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.format || \"Paperback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"Pages:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.pages || \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"Language:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.language || \"English\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"Publisher:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.publisher || \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"Publication Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.publishDate ? new Date(book.publishDate).toLocaleDateString() : \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"ISBN:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.isbn || \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600 font-medium\",\n              children: \"Dimensions:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-900\",\n              children: book.dimensions || \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"reviews\",\n      className: \"border-t border-gray-100 p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap items-center justify-between gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-900\",\n          children: \"Customer Reviews\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), user && !userReview && !showReviewForm && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowReviewForm(true),\n          className: \"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\",\n          children: \"Write a Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this), user && showReviewForm && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-50 p-6 rounded-lg mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-gray-900 mb-4\",\n          children: userReview ? \"Edit Your Review\" : \"Write a Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 13\n        }, this), reviewFormError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 text-red-600 p-3 rounded-lg mb-4\",\n          children: reviewFormError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmitReview,\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: [\"Rating \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-red-500\",\n                children: \"*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 26\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-1\",\n              children: renderStars(reviewRating, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"reviewText\",\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"reviewText\",\n              rows: 4,\n              value: reviewText,\n              onChange: e => setReviewText(e.target.value),\n              className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500\",\n              placeholder: \"Share your thoughts about this book...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: reviewFormLoading,\n              className: \"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\",\n              children: reviewFormLoading ? \"Submitting...\" : userReview ? \"Update Review\" : \"Submit Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowReviewForm(false),\n              className: \"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this), userReview && /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleDeleteReview,\n              className: \"bg-red-50 text-red-600 px-4 py-2 rounded-lg hover:bg-red-100 transition-colors ml-auto\",\n              children: \"Delete Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 11\n      }, this), user && userReview && !showReviewForm && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-purple-50 p-6 rounded-lg mb-6 border border-purple-100\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-start\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-gray-900 mb-1\",\n              children: \"Your Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-3 mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex\",\n                children: renderStars(userReview.rating)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-500\",\n                children: new Date(userReview.createdAt).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowReviewForm(true),\n              className: \"text-purple-600 hover:text-purple-800 text-sm\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleDeleteReview,\n              className: \"text-red-600 hover:text-red-800 text-sm\",\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700\",\n          children: userReview.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 11\n      }, this), book.reviews && book.reviews.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [(expandedReviews ? book.reviews : book.reviews.slice(0, 3)).map((review, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-b border-gray-100 pb-6 last:border-b-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex\",\n                  children: renderStars(review.rating)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 728,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: review.userName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-500\",\n                  children: new Date(review.createdAt).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 732,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-gray-400 hover:text-gray-600\",\n              children: /*#__PURE__*/_jsxDEV(ThumbsUp, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-700\",\n            children: review.comment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 15\n        }, this)), book.reviews.length > 3 && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setExpandedReviews(!expandedReviews),\n          className: \"flex items-center gap-1 text-purple-600 hover:text-purple-800 font-medium\",\n          children: expandedReviews ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Show Less\", /*#__PURE__*/_jsxDEV(ChevronDown, {\n              size: 18,\n              className: \"transform rotate-180\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Show All Reviews (\", book.reviews.length, \")\", /*#__PURE__*/_jsxDEV(ChevronDown, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8 bg-gray-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"No reviews yet. Be the first to review this book!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 768,\n          columnNumber: 13\n        }, this), !user && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/login', {\n            state: {\n              redirectTo: `/book/${bookId}`\n            }\n          }),\n          className: \"mt-4 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\",\n          children: \"Login to Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, this), book.relatedBooks && book.relatedBooks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t border-gray-100 p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-6 text-gray-900\",\n        children: \"You might also like\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 md:grid-cols-4 gap-4\",\n        children: book.relatedBooks.map(relatedBook => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"group cursor-pointer\",\n          onClick: () => navigate(`/book/${relatedBook.id}`),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aspect-[3/4] rounded-lg overflow-hidden bg-gray-100 mb-2 group-hover:shadow-md transition-shadow\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: relatedBook.imageUrl || `/abstract-book-cover.png?height=300&width=200&query=book cover ${relatedBook.id}`,\n              alt: `${relatedBook.title} book cover`,\n              className: \"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 789,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\",\n            children: relatedBook.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: relatedBook.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 17\n          }, this)]\n        }, relatedBook.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 788,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 784,\n      columnNumber: 9\n    }, this), addedToCart && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 z-50 animate-fade-in-up\",\n      children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n        size: 18\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 830,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Added to cart!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 831,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 829,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 400,\n    columnNumber: 5\n  }, this);\n}\n_s(EnhancedBookDetails, \"c0ZijYif1SHGATOQfUs8U0P/Bxo=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EnhancedBookDetails;\nvar _c;\n$RefreshReg$(_c, \"EnhancedBookDetails\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","Star","ShoppingCart","Bookmark","Heart","Share2","ChevronLeft","Award","Clock","ThumbsUp","ChevronDown","UserContext","CartContext","jsxDEV","_jsxDEV","Fragment","_Fragment","EnhancedBookDetails","_s","_book$averageRating","bookId","navigate","user","addItem","book","setBook","loading","setLoading","error","setError","isBookmarked","setIsBookmarked","userReview","setUserReview","reviewText","setReviewText","reviewRating","setReviewRating","showReviewForm","setShowReviewForm","reviewFormLoading","setReviewFormLoading","reviewFormError","setReviewFormError","expandedReviews","setExpandedReviews","addedToCart","setAddedToCart","fetchBookDetails","response","fetch","ok","Error","bookData","json","checkBookmarkStatus","checkUserReview","err","console","message","token","localStorage","getItem","headers","bookmarks","isMarked","some","bookmark","id","parseInt","reviews","review","find","r","comment","rating","toggleBookmark","state","redirectTo","method","body","JSON","stringify","handleAddToCart","title","author","price","imageUrl","setTimeout","handleSubmitReview","e","preventDefault","reviewData","errorData","updatedBookResponse","updatedBook","createdAt","Date","toISOString","handleDeleteReview","renderStars","interactive","Array","fill","map","_","i","size","onClick","undefined","className","Math","floor","fileName","_jsxFileName","lineNumber","columnNumber","hasHalfStar","getDisplayPrice","isOnSale","discountPercentage","discountStartDate","discountEndDate","now","startDate","endDate","discountedPrice","current","toFixed","original","discount","children","src","alt","isBestseller","isNewRelease","navigator","share","text","url","window","location","href","catch","stock","averageRating","reviewCount","description","disabled","genre","format","pages","language","publisher","publishDate","toLocaleDateString","isbn","dimensions","onSubmit","htmlFor","rows","value","onChange","target","placeholder","type","length","slice","index","userName","relatedBooks","relatedBook","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/OneDrive/Desktop/Test/PokheraliDevelopers/pokherali-developers/src/pages/BookDetailPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { Star, ShoppingCart, Bookmark, Heart, Share2, ChevronLeft, Award, Clock, ThumbsUp, ChevronDown } from \"lucide-react\";\r\nimport { UserContext } from \"../contexts/UserContext\";\r\nimport { CartContext } from \"../contexts/CartContext\";\r\n\r\nexport default function EnhancedBookDetails() {\r\n  const { bookId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useContext(UserContext);\r\n  const { addItem } = useContext(CartContext);\r\n  \r\n  const [book, setBook] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isBookmarked, setIsBookmarked] = useState(false);\r\n  const [userReview, setUserReview] = useState(null);\r\n  const [reviewText, setReviewText] = useState(\"\");\r\n  const [reviewRating, setReviewRating] = useState(0);\r\n  const [showReviewForm, setShowReviewForm] = useState(false);\r\n  const [reviewFormLoading, setReviewFormLoading] = useState(false);\r\n  const [reviewFormError, setReviewFormError] = useState(\"\");\r\n  const [expandedReviews, setExpandedReviews] = useState(false);\r\n  const [addedToCart, setAddedToCart] = useState(false);\r\n  \r\n  // Fetch book details\r\n  useEffect(() => {\r\n    const fetchBookDetails = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await fetch(`https://localhost:7126/api/Books/${bookId}`);\r\n        \r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch book details');\r\n        }\r\n        \r\n        const bookData = await response.json();\r\n        setBook(bookData);\r\n        \r\n        // If user is logged in, check if book is bookmarked\r\n        if (user) {\r\n          checkBookmarkStatus();\r\n          checkUserReview();\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching book details:', err);\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchBookDetails();\r\n  }, [bookId, user]);\r\n  \r\n  // Check if book is bookmarked by the user\r\n  const checkBookmarkStatus = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) return;\r\n      \r\n      const response = await fetch('https://localhost:7126/api/Bookmarks', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch bookmarks');\r\n      }\r\n      \r\n      const bookmarks = await response.json();\r\n      const isMarked = bookmarks.some(bookmark => bookmark.id === parseInt(bookId));\r\n      setIsBookmarked(isMarked);\r\n    } catch (err) {\r\n      console.error('Error checking bookmark status:', err);\r\n    }\r\n  };\r\n  \r\n  // Check if user has reviewed this book\r\n  const checkUserReview = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) return;\r\n      \r\n      const response = await fetch('https://localhost:7126/api/Reviews/user', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch user reviews');\r\n      }\r\n      \r\n      const reviews = await response.json();\r\n      const review = reviews.find(r => r.bookId === parseInt(bookId));\r\n      \r\n      if (review) {\r\n        setUserReview(review);\r\n        setReviewText(review.comment);\r\n        setReviewRating(review.rating);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error checking user review:', err);\r\n    }\r\n  };\r\n  \r\n  // Toggle bookmark status\r\n  const toggleBookmark = async () => {\r\n    if (!user) {\r\n      navigate('/login', { state: { redirectTo: `/book/${bookId}` } });\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        throw new Error('Not authenticated');\r\n      }\r\n      \r\n      if (isBookmarked) {\r\n        // Remove bookmark\r\n        const response = await fetch(`https://localhost:7126/api/Bookmarks/${bookId}`, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          throw new Error('Failed to remove bookmark');\r\n        }\r\n        \r\n        setIsBookmarked(false);\r\n      } else {\r\n        // Add bookmark\r\n        const response = await fetch('https://localhost:7126/api/Bookmarks', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify(parseInt(bookId))\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          throw new Error('Failed to add bookmark');\r\n        }\r\n        \r\n        setIsBookmarked(true);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error toggling bookmark:', err);\r\n      // Display error message to user\r\n    }\r\n  };\r\n  \r\n  // Add book to cart\r\n  const handleAddToCart = () => {\r\n    if (!book) return;\r\n    \r\n    addItem({\r\n      id: book.id,\r\n      title: book.title,\r\n      author: book.author,\r\n      price: book.price,\r\n      imageUrl: book.imageUrl\r\n    });\r\n    \r\n    // Show success indicator\r\n    setAddedToCart(true);\r\n    setTimeout(() => {\r\n      setAddedToCart(false);\r\n    }, 2000);\r\n  };\r\n  \r\n  // Submit review\r\n  const handleSubmitReview = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!user) {\r\n      navigate('/login', { state: { redirectTo: `/book/${bookId}` } });\r\n      return;\r\n    }\r\n    \r\n    if (reviewRating === 0) {\r\n      setReviewFormError(\"Please select a rating\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setReviewFormLoading(true);\r\n      setReviewFormError(\"\");\r\n      \r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        throw new Error('Not authenticated');\r\n      }\r\n      \r\n      const reviewData = {\r\n        bookId: parseInt(bookId),\r\n        rating: reviewRating,\r\n        comment: reviewText\r\n      };\r\n      \r\n      let response;\r\n      \r\n      if (userReview) {\r\n        // Update existing review\r\n        reviewData.id = userReview.id;\r\n        \r\n        response = await fetch(`https://localhost:7126/api/Reviews/${userReview.id}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify(reviewData)\r\n        });\r\n      } else {\r\n        // Create new review\r\n        response = await fetch('https://localhost:7126/api/Reviews', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify(reviewData)\r\n        });\r\n      }\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Failed to submit review');\r\n      }\r\n      \r\n      // Refresh book details to show updated review\r\n      const updatedBookResponse = await fetch(`https://localhost:7126/api/Books/${bookId}`);\r\n      if (updatedBookResponse.ok) {\r\n        const updatedBook = await updatedBookResponse.json();\r\n        setBook(updatedBook);\r\n      }\r\n      \r\n      // If this was a new review, update userReview state\r\n      if (!userReview) {\r\n        setUserReview({\r\n          id: parseInt(bookId), // This will be replaced with actual ID from response\r\n          bookId: parseInt(bookId),\r\n          rating: reviewRating,\r\n          comment: reviewText,\r\n          createdAt: new Date().toISOString()\r\n        });\r\n      }\r\n      \r\n      setShowReviewForm(false);\r\n    } catch (err) {\r\n      console.error('Error submitting review:', err);\r\n      setReviewFormError(err.message);\r\n    } finally {\r\n      setReviewFormLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Delete review\r\n  const handleDeleteReview = async () => {\r\n    if (!userReview) return;\r\n    \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      \r\n      if (!token) {\r\n        throw new Error('Not authenticated');\r\n      }\r\n      \r\n      const response = await fetch(`https://localhost:7126/api/Reviews/${userReview.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Failed to delete review');\r\n      }\r\n      \r\n      // Reset review states\r\n      setUserReview(null);\r\n      setReviewText(\"\");\r\n      setReviewRating(0);\r\n      setShowReviewForm(false);\r\n      \r\n      // Refresh book details to show updated reviews\r\n      const updatedBookResponse = await fetch(`https://localhost:7126/api/Books/${bookId}`);\r\n      if (updatedBookResponse.ok) {\r\n        const updatedBook = await updatedBookResponse.json();\r\n        setBook(updatedBook);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error deleting review:', err);\r\n      // Display error message to user\r\n    }\r\n  };\r\n  \r\n  // Render stars for rating\r\n  const renderStars = (rating, interactive = false) => {\r\n    return Array(5)\r\n      .fill(0)\r\n      .map((_, i) => (\r\n        <Star\r\n          key={i}\r\n          size={interactive ? 24 : 18}\r\n          onClick={interactive ? () => setReviewRating(i + 1) : undefined}\r\n          className={`${interactive ? 'cursor-pointer' : ''} ${\r\n            i < Math.floor(rating) ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'\r\n          } ${interactive && i < reviewRating ? 'text-yellow-400 fill-yellow-400' : ''}`}\r\n        />\r\n      ));\r\n  };\r\n  \r\n  // Calculate half stars for more accurate ratings\r\n  const hasHalfStar = (rating) => rating % 1 >= 0.5;\r\n  \r\n  // Calculate discounted price if book is on sale\r\n  const getDisplayPrice = () => {\r\n    if (!book) return null;\r\n    \r\n    if (book.isOnSale && book.discountPercentage && \r\n        book.discountStartDate && book.discountEndDate) {\r\n      const now = new Date();\r\n      const startDate = new Date(book.discountStartDate);\r\n      const endDate = new Date(book.discountEndDate);\r\n      \r\n      if (now >= startDate && now <= endDate) {\r\n        const discountedPrice = book.price * (1 - book.discountPercentage / 100);\r\n        return {\r\n          current: discountedPrice.toFixed(2),\r\n          original: book.price.toFixed(2),\r\n          discount: book.discountPercentage\r\n        };\r\n      }\r\n    }\r\n    \r\n    return {\r\n      current: book.price.toFixed(2),\r\n      original: null,\r\n      discount: null\r\n    };\r\n  };\r\n  \r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg\">\r\n          <p>Error: {error}</p>\r\n          <button\r\n            onClick={() => navigate('/browse')}\r\n            className=\"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors\"\r\n          >\r\n            Return to Browse\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (!book) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        <div className=\"bg-yellow-50 text-yellow-600 p-4 rounded-lg\">\r\n          <p>Book not found.</p>\r\n          <button\r\n            onClick={() => navigate('/browse')}\r\n            className=\"mt-4 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors\"\r\n          >\r\n            Return to Browse\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  const price = getDisplayPrice();\r\n  \r\n  return (\r\n    <div className=\"max-w-7xl mx-auto bg-white rounded-xl shadow-md overflow-hidden\">\r\n      {/* Breadcrumb navigation */}\r\n      <div className=\"px-6 pt-6 pb-2\">\r\n        <button\r\n          onClick={() => navigate('/browse')}\r\n          className=\"inline-flex items-center text-sm text-purple-600 hover:text-purple-800 transition-colors\"\r\n        >\r\n          <ChevronLeft size={16} className=\"mr-1\" />\r\n          Back to Books\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"p-6\">\r\n        <div className=\"flex flex-col lg:flex-row gap-8\">\r\n          {/* Book image with badges */}\r\n          <div className=\"lg:w-1/3 relative\">\r\n            <div className=\"aspect-[3/4] rounded-xl overflow-hidden bg-gray-100 shadow-lg\">\r\n              <img\r\n                src={book.imageUrl || \"/placeholder.svg?height=600&width=400&query=book cover\"}\r\n                alt={`${book.title} book cover`}\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            </div>\r\n\r\n            {/* Badges */}\r\n            <div className=\"absolute top-4 left-4 flex flex-col gap-2\">\r\n              {book.isBestseller && (\r\n                <span className=\"bg-yellow-500 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center\">\r\n                  <Award size={14} className=\"mr-1\" />\r\n                  Bestseller\r\n                </span>\r\n              )}\r\n              {book.isNewRelease && (\r\n                <span className=\"bg-purple-600 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center\">\r\n                  <Clock size={14} className=\"mr-1\" />\r\n                  New Release\r\n                </span>\r\n              )}\r\n              {book.isOnSale && price.discount && (\r\n                <span className=\"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center\">\r\n                  <span className=\"mr-1\">{price.discount}%</span>\r\n                  On Sale\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Share button */}\r\n            <button \r\n              className=\"absolute top-4 right-4 bg-white/80 backdrop-blur-sm p-2 rounded-full shadow-md hover:bg-white transition-colors\"\r\n              onClick={() => navigator.share({\r\n                title: book.title,\r\n                text: `Check out ${book.title} by ${book.author}`,\r\n                url: window.location.href\r\n              }).catch(err => console.error('Error sharing:', err))}\r\n            >\r\n              <Share2 size={18} className=\"text-gray-700\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Book details */}\r\n          <div className=\"lg:w-2/3\">\r\n            <div className=\"flex flex-col h-full\">\r\n              <div className=\"flex-grow\">\r\n                <div className=\"flex flex-wrap items-start justify-between gap-4 mb-4\">\r\n                  <div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{book.title}</h1>\r\n                    <p className=\"text-xl text-gray-600\">\r\n                      by <span className=\"hover:text-purple-600 cursor-pointer transition-colors\">{book.author}</span>\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <span className=\"text-2xl font-bold text-purple-600\">\r\n                      ${price.current}\r\n                    </span>\r\n                    {price.original && price.original !== price.current && (\r\n                      <span className=\"text-lg text-gray-500 line-through\">${price.original}</span>\r\n                    )}\r\n                    <span\r\n                      className={`text-sm px-3 py-1 rounded-full font-medium ${\r\n                        book.stock > 0 ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"\r\n                      }`}\r\n                    >\r\n                      {book.stock > 0 ? \"In stock\" : \"Out of stock\"}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center mb-6\">\r\n                  <div className=\"flex\">\r\n                    {renderStars(book.averageRating || 0)}\r\n                    {hasHalfStar(book.averageRating || 0) && (\r\n                      <div className=\"relative\">\r\n                        <Star size={18} className=\"text-gray-300\" />\r\n                        <div className=\"absolute inset-0 overflow-hidden w-1/2\">\r\n                          <Star size={18} className=\"text-yellow-400 fill-yellow-400\" />\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <span className=\"ml-2 text-gray-600\">({book.averageRating?.toFixed(1) || 0} out of 5)</span>\r\n                  <span className=\"mx-2 text-gray-400\">•</span>\r\n                  <a href=\"#reviews\" className=\"text-purple-600 hover:text-purple-800 transition-colors\">\r\n                    {book.reviewCount || 0} reviews\r\n                  </a>\r\n                </div>\r\n\r\n                <div className=\"mb-8\">\r\n                  <h3 className=\"text-lg font-semibold mb-3 text-gray-900\">Description</h3>\r\n                  <p className=\"text-gray-700 leading-relaxed\">\r\n                    {book.description || \"No description available for this book.\"}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex flex-wrap gap-3 mb-6\">\r\n                <button \r\n                  className={`flex items-center gap-2 ${\r\n                    addedToCart \r\n                      ? \"bg-green-600 text-white\"\r\n                      : \"bg-purple-600 text-white hover:bg-purple-700\"\r\n                  } px-6 py-3 rounded-lg transition-colors shadow-sm font-medium`}\r\n                  onClick={handleAddToCart}\r\n                  disabled={book.stock <= 0 || addedToCart}\r\n                >\r\n                  <ShoppingCart size={18} />\r\n                  <span>\r\n                    {book.stock <= 0 \r\n                      ? \"Out of Stock\" \r\n                      : addedToCart \r\n                        ? \"Added to Cart!\" \r\n                        : \"Add to Cart\"}\r\n                  </span>\r\n                </button>\r\n                <button \r\n                  className={`flex items-center gap-2 ${\r\n                    isBookmarked ? \r\n                      \"bg-purple-100 text-purple-800 hover:bg-purple-200\" : \r\n                      \"bg-gray-100 text-gray-800 hover:bg-gray-200\"\r\n                  } px-6 py-3 rounded-lg transition-colors font-medium`}\r\n                  onClick={toggleBookmark}\r\n                >\r\n                  <Bookmark size={18} className={isBookmarked ? \"fill-purple-800\" : \"\"} />\r\n                  <span>{isBookmarked ? \"Bookmarked\" : \"Bookmark\"}</span>\r\n                </button>\r\n                <button className=\"flex items-center gap-2 bg-red-50 text-red-600 px-6 py-3 rounded-lg hover:bg-red-100 transition-colors font-medium\">\r\n                  <Heart size={18} />\r\n                  <span>Add to Wishlist</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Book details section */}\r\n      <div className=\"border-t border-gray-100 bg-gray-50 p-8 rounded-b-xl\">\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-900\">Book Details</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8\">\r\n          <div className=\"space-y-3\">\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">Genre:</span>\r\n              <span className=\"text-gray-900\">{book.genre || \"Unknown\"}</span>\r\n            </p>\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">Format:</span>\r\n              <span className=\"text-gray-900\">{book.format || \"Paperback\"}</span>\r\n            </p>\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">Pages:</span>\r\n              <span className=\"text-gray-900\">{book.pages || \"Unknown\"}</span>\r\n            </p>\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">Language:</span>\r\n              <span className=\"text-gray-900\">{book.language || \"English\"}</span>\r\n            </p>\r\n          </div>\r\n          <div className=\"space-y-3\">\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">Publisher:</span>\r\n              <span className=\"text-gray-900\">{book.publisher || \"Unknown\"}</span>\r\n            </p>\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">Publication Date:</span>\r\n              <span className=\"text-gray-900\">\r\n                {book.publishDate ? new Date(book.publishDate).toLocaleDateString() : \"Unknown\"}\r\n              </span>\r\n            </p>\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">ISBN:</span>\r\n              <span className=\"text-gray-900\">{book.isbn || \"Unknown\"}</span>\r\n            </p>\r\n            <p className=\"flex justify-between\">\r\n              <span className=\"text-gray-600 font-medium\">Dimensions:</span>\r\n              <span className=\"text-gray-900\">{book.dimensions || \"Unknown\"}</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reviews section */}\r\n      <div id=\"reviews\" className=\"border-t border-gray-100 p-8\">\r\n        <div className=\"flex flex-wrap items-center justify-between gap-4 mb-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Customer Reviews</h2>\r\n          \r\n          {user && !userReview && !showReviewForm && (\r\n            <button\r\n              onClick={() => setShowReviewForm(true)}\r\n              className=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\r\n            >\r\n              Write a Review\r\n            </button>\r\n          )}\r\n        </div>\r\n        \r\n        {/* Review form */}\r\n        {user && showReviewForm && (\r\n          <div className=\"bg-gray-50 p-6 rounded-lg mb-6\">\r\n            <h3 className=\"font-semibold text-gray-900 mb-4\">\r\n              {userReview ? \"Edit Your Review\" : \"Write a Review\"}\r\n            </h3>\r\n            \r\n            {reviewFormError && (\r\n              <div className=\"bg-red-50 text-red-600 p-3 rounded-lg mb-4\">\r\n                {reviewFormError}\r\n              </div>\r\n            )}\r\n            \r\n            <form onSubmit={handleSubmitReview} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Rating <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <div className=\"flex items-center gap-1\">\r\n                  {renderStars(reviewRating, true)}\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"reviewText\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Review\r\n                </label>\r\n                <textarea\r\n                  id=\"reviewText\"\r\n                  rows={4}\r\n                  value={reviewText}\r\n                  onChange={(e) => setReviewText(e.target.value)}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\r\n                  placeholder=\"Share your thoughts about this book...\"\r\n                ></textarea>\r\n              </div>\r\n              \r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={reviewFormLoading}\r\n                  className=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\r\n                >\r\n                  {reviewFormLoading ? \"Submitting...\" : userReview ? \"Update Review\" : \"Submit Review\"}\r\n                </button>\r\n                \r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowReviewForm(false)}\r\n                  className=\"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                \r\n                {userReview && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleDeleteReview}\r\n                    className=\"bg-red-50 text-red-600 px-4 py-2 rounded-lg hover:bg-red-100 transition-colors ml-auto\"\r\n                  >\r\n                    Delete Review\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n        \r\n        {/* User's review */}\r\n        {user && userReview && !showReviewForm && (\r\n          <div className=\"bg-purple-50 p-6 rounded-lg mb-6 border border-purple-100\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <h3 className=\"font-semibold text-gray-900 mb-1\">Your Review</h3>\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                  <div className=\"flex\">\r\n                    {renderStars(userReview.rating)}\r\n                  </div>\r\n                  <span className=\"text-sm text-gray-500\">\r\n                    {new Date(userReview.createdAt).toLocaleDateString()}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => setShowReviewForm(true)}\r\n                  className=\"text-purple-600 hover:text-purple-800 text-sm\"\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  onClick={handleDeleteReview}\r\n                  className=\"text-red-600 hover:text-red-800 text-sm\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <p className=\"text-gray-700\">{userReview.comment}</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Other reviews */}\r\n        {book.reviews && book.reviews.length > 0 ? (\r\n          <div className=\"space-y-6\">\r\n            {(expandedReviews ? book.reviews : book.reviews.slice(0, 3)).map((review, index) => (\r\n              <div key={index} className=\"border-b border-gray-100 pb-6 last:border-b-0\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div>\r\n                    <div className=\"flex items-center gap-3 mb-2\">\r\n                      <div className=\"flex\">\r\n                        {renderStars(review.rating)}\r\n                      </div>\r\n                      <span className=\"font-medium\">{review.userName}</span>\r\n                      <span className=\"text-sm text-gray-500\">\r\n                        {new Date(review.createdAt).toLocaleDateString()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <button className=\"text-gray-400 hover:text-gray-600\">\r\n                    <ThumbsUp size={16} />\r\n                  </button>\r\n                </div>\r\n                \r\n                <p className=\"text-gray-700\">{review.comment}</p>\r\n              </div>\r\n            ))}\r\n            \r\n            {book.reviews.length > 3 && (\r\n              <button\r\n                onClick={() => setExpandedReviews(!expandedReviews)}\r\n                className=\"flex items-center gap-1 text-purple-600 hover:text-purple-800 font-medium\"\r\n              >\r\n                {expandedReviews ? (\r\n                  <>\r\n                    Show Less\r\n                    <ChevronDown size={18} className=\"transform rotate-180\" />\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    Show All Reviews ({book.reviews.length})\r\n                    <ChevronDown size={18} />\r\n                  </>\r\n                )}\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\r\n            <p className=\"text-gray-500\">No reviews yet. Be the first to review this book!</p>\r\n            \r\n            {!user && (\r\n              <button\r\n                onClick={() => navigate('/login', { state: { redirectTo: `/book/${bookId}` } })}\r\n                className=\"mt-4 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors\"\r\n              >\r\n                Login to Review\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Recommendations section */}\r\n      {book.relatedBooks && book.relatedBooks.length > 0 && (\r\n        <div className=\"border-t border-gray-100 p-8\">\r\n          <h2 className=\"text-xl font-semibold mb-6 text-gray-900\">You might also like</h2>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            {book.relatedBooks.map((relatedBook) => (\r\n              <div key={relatedBook.id} className=\"group cursor-pointer\" onClick={() => navigate(`/book/${relatedBook.id}`)}>\r\n                <div className=\"aspect-[3/4] rounded-lg overflow-hidden bg-gray-100 mb-2 group-hover:shadow-md transition-shadow\">\r\n                  <img\r\n                    src={relatedBook.imageUrl || `/abstract-book-cover.png?height=300&width=200&query=book cover ${relatedBook.id}`}\r\n                    alt={`${relatedBook.title} book cover`}\r\n                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                  />\r\n                </div>\r\n                <h3 className=\"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\">\r\n                  {relatedBook.title}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600\">{relatedBook.author}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Recently viewed books section - if implemented */}\r\n      {/* <div className=\"border-t border-gray-100 p-8\">\r\n        <h2 className=\"text-xl font-semibold mb-6 text-gray-900\">Recently Viewed</h2>\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\r\n          {recentlyViewedBooks.map((book) => (\r\n            <div key={book.id} className=\"group cursor-pointer\" onClick={() => navigate(`/book/${book.id}`)}>\r\n              <div className=\"aspect-[3/4] rounded-md overflow-hidden bg-gray-100 mb-2\">\r\n                <img\r\n                  src={book.imageUrl || `/abstract-book-cover.png?height=200&width=140&query=book cover ${book.id}`}\r\n                  alt={`${book.title} book cover`}\r\n                  className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                />\r\n              </div>\r\n              <h3 className=\"text-sm font-medium text-gray-900 truncate group-hover:text-purple-600 transition-colors\">\r\n                {book.title}\r\n              </h3>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div> */}\r\n\r\n      {/* Toast notification for added to cart */}\r\n      {addedToCart && (\r\n        <div className=\"fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 z-50 animate-fade-in-up\">\r\n          <ShoppingCart size={18} />\r\n          <span>Added to cart!</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}